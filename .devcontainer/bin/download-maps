#!/usr/bin/env bash

set -e

# download the USGS 1 arc-second elevation data for the specified tile.

lats="38 39"
lons="110 111"

dir=/release/osm/

function get_url {
    echo https://prd-tnm.s3.amazonaws.com/StagedProducts/Elevation/1/TIFF/current/n${1}w${2}/USGS_1_n${1}w${2}.tif
}

# download the data
for lat in $lats; do
    for lon in $lons; do
        # don't re-download if it exists
        if [[ -f "${dir}USGS_1_n${lat}w${lon}.tif" ]]; then
            echo "skipping $lat $lon (file already exists)"
            continue
        fi

        aria2c -x8 -d $dir "$(get_url $lat $lon)"
    done
done
